<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Acceso restringido</title>
  <style>
    :root{
      --bg1:#0f172a;
      --bg2:#071032;
      --accent:#7ce7c9;
      --accent2:#6ea8fe;
      --muted:#9aa4bd;
      --card:#0b1220;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(110,168,254,0.08), transparent),
                  radial-gradient(900px 500px at 90% 90%, rgba(124,231,201,0.06), transparent),
                  linear-gradient(180deg,var(--bg1),var(--bg2));
      color:#e6eef8;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", Arial;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .card{
      width:100%;
      max-width:920px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:18px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      overflow:hidden;
      display:grid;
      grid-template-columns: 360px 1fr;
      gap:0;
      align-items:stretch;
      min-height:300px;
    }

    /* left panel */
    .side{
      padding:34px 28px;
      background:
        linear-gradient(180deg, rgba(255,255,255,0.02), transparent),
        repeating-linear-gradient(135deg, rgba(255,255,255,0.01) 0 2px, transparent 2px 8px),
        radial-gradient(circle at -20% 20%, rgba(110,168,254,0.03), transparent 20%),
        var(--card);
      display:flex;
      flex-direction:column;
      gap:18px;
      align-items:center;
      justify-content:center;
      text-align:center;
    }

    .logo{
      width:96px;height:96px;border-radius:20px;background:linear-gradient(135deg,var(--accent),var(--accent2));
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 6px 18px rgba(110,168,254,0.15), inset 0 -6px 18px rgba(0,0,0,0.12);
      transform:rotate(-8deg);
    }
    .logo svg{width:56px;height:56px;filter:drop-shadow(0 2px 6px rgba(0,0,0,0.18));}

    h1{margin:0;font-size:20px;letter-spacing:-0.3px}
    p.lead{margin:0;color:var(--muted);font-size:14px;line-height:1.4}

    /* right panel */
    .main{
      padding:28px 30px;
      display:flex;
      flex-direction:column;
      gap:14px;
      justify-content:center;
    }

    .lock-wrap{
      display:flex;gap:14px;align-items:center;
    }
    .lock{
      width:78px;height:78px;border-radius:14px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.05));
      display:flex;align-items:center;justify-content:center;
      box-shadow: 0 8px 22px rgba(2,6,23,0.5);
      position:relative;overflow:visible;
    }
    .lock svg{width:42px;height:42px}

    .title{
      font-size:18px;margin:0 0 4px 0;
    }
    .desc{color:var(--muted);font-size:14px;margin:0 0 8px 0}

    /* actions */
    .actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px}
    .btn{
      border:0;padding:10px 14px;border-radius:10px;font-weight:600;font-size:14px;
      cursor:pointer;background:rgba(255,255,255,0.03);color:inherit;
      transition:transform .12s ease, box-shadow .12s ease;
      display:inline-flex;align-items:center;gap:10px;
      box-shadow:0 4px 14px rgba(2,6,23,0.25);
    }
    .btn:active{transform:translateY(1px)}
    .btn.primary{
      background:linear-gradient(90deg,var(--accent),var(--accent2));
      color:#05223a;
      box-shadow:0 8px 26px rgba(110,168,254,0.18);
    }
    .btn.ghost{
      background:transparent;border:1px solid rgba(255,255,255,0.06);
    }

    .hint{font-size:13px;color:var(--muted);margin-top:6px}

    /* confetti-ish decorative */
    .confetti{
      position:absolute;pointer-events:none;inset:0;z-index:0;
      opacity:0.9;
    }
    .dot{
      position:absolute;width:8px;height:8px;border-radius:2px;transform:rotate(20deg);
      animation:fall 2200ms linear infinite;
      opacity:0.95;
    }
    @keyframes fall{
      0%{transform:translateY(-40px) rotate(0) scale(1)}
      100%{transform:translateY(420px) rotate(360deg) scale(.9)}
    }

    /* responsive */
    @media (max-width:820px){
      .card{grid-template-columns:1fr;max-width:720px}
      .side{padding:20px}
      .main{padding:20px}
      .logo{transform:none}
    }

    /* small helper */
    .muted{color:var(--muted);font-size:13px}

    .small{
      font-size:13px;color:rgba(255,255,255,0.9);
      margin-top:6px;
    }

    /* tiny copy feedback */
    .copied{
      display:inline-block;margin-left:8px;color:var(--accent2);font-weight:700;
      font-size:13px;opacity:0;transform:translateY(-6px);
      transition:opacity .25s, transform .25s;
    }
    .copied.show{opacity:1;transform:translateY(0)}
  </style>
</head>
<body>
  <div class="card" role="dialog" aria-labelledby="title" aria-describedby="desc">
    <div class="side">
      <div class="logo" aria-hidden="true">
        <!-- playful shield + bolt icon -->
        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M32 4c-8 4-18 6-26 6 0 23 9 36 26 48 17-12 26-25 26-48-8 0-18-2-26-6z" fill="#05223a" opacity="0.12"/>
          <path d="M32 6c-6.2 3.1-13.9 4.6-22 5.2 0 19 7.4 30.6 22 40 14.6-9.4 22-21 22-40-8.1-.6-15.8-2.1-22-5.2z" fill="#fff" opacity="0.06"/>
          <path d="M40 20l-12 6 6 8-8 10 18-30z" fill="#05223a"/>
          <path d="M40 20l-12 6 6 8-8 10 18-30z" fill="white" opacity="0.14"/>
        </svg>
      </div>
      <h1 id="title">Ups — acceso limitado</h1>
      <p class="lead">Parece que estás intentando entrar desde fuera de la aplicación oficial. Por seguridad, el acceso solo está permitido desde la app oficial.</p>
      <p class="muted">¿No tienes la app? No te preocupes: te ayudamos a abrir o descargarla.</p>
    </div>

    <div class="main">
      <div class="lock-wrap">
        <div class="lock" aria-hidden="true">
          <!-- lock svg -->
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="3" y="11" width="18" height="10" rx="2" fill="white" opacity="0.06"/>
            <path d="M7 11V8a5 5 0 0110 0v3" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round" />
            <rect x="7" y="11" width="10" height="7" rx="1" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>

        <div style="flex:1">
          <p class="title" id="desc">No puedes acceder desde aquí</p>
          <p class="desc">Para continuar, usa la <strong>aplicación oficial</strong>. Esto protege tus datos y garantiza una experiencia completa.</p>
          <div class="actions" role="group" aria-label="Acciones">
            <button class="btn primary" id="openAppBtn" title="Abrir la app oficial">
              <!-- inline svg -->
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 2v20M5 9l7-7 7 7" stroke="#05223a" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Abrir app oficial
            </button>

            <button class="btn ghost" id="downloadBtn" title="Ir a la página de descarga">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 3v12M5 12l7 7 7-7" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Descargar app
            </button>

            <button class="btn" id="copyBtn" title="Copiar enlace">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M9 12h6M9 16h6M9 8h6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Copiar enlace
              <span id="copied" class="copied">Copiado ✓</span>
            </button>
          </div>

          <div class="hint" id="statusHint" aria-live="polite">Sugerencia: intenta abrir la app oficial desde tu dispositivo.</div>
        </div>
      </div>

      <p class="small">Consejo de seguridad: si alguien te redirige a una página desconocida, cierra la sesión y verifica desde la app oficial.</p>
    </div>

    <!-- decorative confetti -->
    <div class="confetti" aria-hidden="true">
      <!-- a few colored dots positioned randomly -->
      <div class="dot" style="background:#FF7A8A; left:8%; top:2%; animation-delay:0s;"></div>
      <div class="dot" style="background:#FFD86B; left:26%; top:-8%; animation-delay:.2s; width:10px;height:10px;border-radius:50%;"></div>
      <div class="dot" style="background:#7CE7C9; left:48%; top:-6%; animation-delay:.15s;"></div>
      <div class="dot" style="background:#6EA8FE; left:70%; top:-4%; animation-delay:.25s;"></div>
      <div class="dot" style="background:#C48BFF; left:90%; top:-2%; animation-delay:.05s;"></div>
    </div>
  </div>

  <script>
    (function(){
      // Replace these values for your app:
      // customScheme: scheme to try to open the app (e.g. 'miapp://home')
      // downloadUrl: web URL where the user can download or learn about the official app
      const customScheme = "miapp://home";
      const downloadUrl = "https://apk.e-droid.net/apk/app3712598-igxyjh.apk?v=2"; // <- cambia esto a tu enlace real
      const fallbackTimeout = 900; // ms to wait for app open fallback

      const openAppBtn = document.getElementById("openAppBtn");
      const downloadBtn = document.getElementById("downloadBtn");
      const copyBtn = document.getElementById("copyBtn");
      const statusHint = document.getElementById("statusHint");
      const copiedBadge = document.getElementById("copied");

      // Try to open the app using a custom URL scheme.
      // Approach works on many mobile browsers. If the app isn't present,
      // the browser will stay on the page and we can show fallback.
      function openApp() {
        statusHint.textContent = "Intentando abrir la app oficial...";
        // Create an iframe hack for some browsers, but modern approach uses location.
        let opened = false;
        const now = Date.now();

        // for iOS Safari, using setTimeout with location is common.
        const iframe = document.createElement("iframe");
        iframe.style.display = "none";
        iframe.src = customScheme;
        document.body.appendChild(iframe);

        setTimeout(function(){
          document.body.removeChild(iframe);
          // If elapsed time is short, likely the app didn't open.
          if (Date.now() - now < fallbackTimeout + 200) {
            statusHint.textContent = "No se detectó la app. Puedes descargarla.";
            // small visual nudge:
            flashDownload();
          } else {
            statusHint.textContent = "Abriendo la app...";
          }
        }, fallbackTimeout);
      }

      function flashDownload(){
        downloadBtn.animate([{transform:"translateY(0)"},{transform:"translateY(-6px)"}], {duration:260,iterations:2});
      }

      openAppBtn.addEventListener("click", function(e){
        e.preventDefault();
        openApp();
      });

      downloadBtn.addEventListener("click", function(e){
        e.preventDefault();
        // open download page in a new tab
        try { window.open(downloadUrl, "_blank", "noopener"); }
        catch(e){ location.href = downloadUrl; }
      });

      copyBtn.addEventListener("click", async function(e){
        e.preventDefault();
        const text = downloadUrl;
        // Try Clipboard API, fallback to textarea method.
        try {
          await navigator.clipboard.writeText(text);
        } catch (err) {
          const ta = document.createElement("textarea");
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          document.body.removeChild(ta);
        }
        // show tiny feedback
        copiedBadge.classList.add("show");
        setTimeout(()=>copiedBadge.classList.remove("show"), 1400);
      });

      // Optional: if user agent suggests they *are* inside the official app
      // (for example the app sets a custom userAgent fragment), allow bypass.
      // Example check (adjust to your app's UA marker):
      const ua = navigator.userAgent || "";
      const likelyInApp = /MiAppOficial|MyAppName|miapp/i.test(ua);
      if (likelyInApp) {
        // If detected, automatically attempt to proceed
        statusHint.textContent = "App oficial detectada — redirigiendo...";
        setTimeout(()=> {
          // here you could redirect to the in-app route or close dialog
          // location.href = "/app/home";
          statusHint.textContent = "¡Listo! (sólo ejemplo — personaliza la acción)";
        }, 600);
      }

      // Accessibility: trap focus inside the dialog while visible
      (function trapFocus(){
        const dialog = document.querySelector('.card');
        const focusable = dialog.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (!focusable.length) return;
        const first = focusable[0], last = focusable[focusable.length-1];
        dialog.addEventListener('keydown', function(e){
          if (e.key === 'Tab') {
            if (e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
            else if (!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
          }
          if (e.key === 'Escape'){ /* could close or ignore */ }
        });
      })();

    })();
  </script>
</body>
  </html>
